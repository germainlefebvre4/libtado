[tox]
isolated_build = true
requires =
    tox>=4
env_list = lint, unittest, generate_json_schemas, py{38,39,310,311}

[testenv]
description = run unit tests
skip_install = true
whitelist_externals = poetry
allowlist_externals = poetry
pass_env =
    TADO_USERNAME
    TADO_PASSWORD
    TADO_CLIENT_SECRET
commands_pre =
    poetry install

[testenv:lint]
description = run linters
skip_install = true
deps =
    ruff
commands =
    ruff check .

[testenv:unittest]
description = run unit tests
commands =
    poetry run pytest tests/

[testenv:generate_json_schemas]
description = run json shcemas generation
commands =
    poetry run python generate_json_schemas.py
